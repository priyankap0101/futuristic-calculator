<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üî¢ Pro Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/mathjs@11.8.0/lib/browser/math.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg: #0e0e10;
      --text: #f9f9f9;
      --accent: #00f0ff;
      --danger: #ff0057;
    }
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow-x: hidden;
    }
    header {
      display: flex;
      justify-content: center;
      gap: 1rem;
      background: rgba(0,0,0,0.8);
      padding: 1rem;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    header button {
      background: transparent;
      border: 2px solid var(--accent);
      color: var(--accent);
      padding: 0.5rem 1rem;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
    }
    header button.active, header button:hover {
      background: var(--accent);
      color: black;
    }
    .tab {
      display: none;
      padding: 2rem;
      animation: fadeIn 0.5s;
    }
    .tab.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .calc-container {
      max-width: 400px;
      margin: auto;
      background: rgba(255,255,255,0.05);
      padding: 1rem;
      border-radius: 16px;
      box-shadow: 0 0 30px var(--accent);
    }
    .display {
      background: rgba(0,0,0,0.6);
      padding: 1rem;
      border-radius: 12px;
      font-size: 1.5rem;
      word-wrap: break-word;
      margin-bottom: 1rem;
      min-height: 3rem;
    }
    .buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.5rem;
    }
    .buttons button {
      padding: 1rem;
      border: none;
      border-radius: 12px;
      font-size: 1.2rem;
      cursor: pointer;
      background: rgba(255,255,255,0.1);
      color: var(--text);
      transition: all 0.2s;
    }
    .buttons button:hover {
      background: var(--accent);
      color: black;
    }
    .history {
      margin-top: 1rem;
      background: rgba(255,255,255,0.05);
      padding: 0.5rem;
      border-radius: 12px;
      max-height: 150px;
      overflow-y: auto;
      font-size: 0.9rem;
    }
    canvas { background: rgba(255,255,255,0.05); border-radius: 12px; }
    .converter {
      max-width: 400px;
      margin: auto;
      background: rgba(255,255,255,0.05);
      padding: 1rem;
      border-radius: 16px;
    }
    .converter select, .converter input {
      width: 100%;
      margin: 0.5rem 0;
      padding: 0.5rem;
      border-radius: 8px;
      border: none;
    }
    /* Galaxy Theme Background */
    body.galaxy {
      background: black;
      background-image: radial-gradient(circle at 20% 30%, #0ff 1px, transparent 2px),
                        radial-gradient(circle at 80% 70%, #f0f 1px, transparent 2px),
                        radial-gradient(circle at 50% 50%, #ff0 2px, transparent 2px);
      background-size: 200px 200px;
      animation: starfield 20s linear infinite;
    }
    @keyframes starfield {
      from { background-position: 0 0; }
      to { background-position: 200px 200px; }
    }
  </style>
</head>
<body class="galaxy">
  <header>
    <button class="tab-btn active" data-tab="calc">Calculator</button>
    <button class="tab-btn" data-tab="graph">Graph</button>
    <button class="tab-btn" data-tab="convert">Converter</button>
    <button class="tab-btn" data-tab="settings">Settings</button>
  </header>

  <!-- Calculator Tab -->
  <div id="calc" class="tab active">
    <div class="calc-container">
      <div class="display" id="display"></div>
      <div class="buttons">
        <button>(</button><button>)</button><button>C</button><button>=</button>
        <button>7</button><button>8</button><button>9</button><button>/</button>
        <button>4</button><button>5</button><button>6</button><button>*</button>
        <button>1</button><button>2</button><button>3</button><button>-</button>
        <button>0</button><button>.</button><button>^</button><button>+</button>
        <button>œÄ</button><button>e</button><button>‚àö</button><button>!</button>
      </div>
      <div class="history" id="history"></div>
    </div>
  </div>

  <!-- Graph Tab -->
  <div id="graph" class="tab">
    <h2>üìà Graph Functions</h2>
    <input type="text" id="graphInput" placeholder="Enter function e.g. sin(x), x^2" />
    <button onclick="plotGraph()">Plot</button>
    <canvas id="graphCanvas"></canvas>
  </div>

  <!-- Converter Tab -->
  <div id="convert" class="tab">
    <div class="converter">
      <h2>üîÑ Unit Converter</h2>
      <input type="number" id="convInput" placeholder="Enter value" />
      <select id="convType">
        <option value="m-cm">Meters ‚ûù Centimeters</option>
        <option value="cm-m">Centimeters ‚ûù Meters</option>
        <option value="kg-g">Kilograms ‚ûù Grams</option>
        <option value="g-kg">Grams ‚ûù Kilograms</option>
        <option value="c-f">Celsius ‚ûù Fahrenheit</option>
        <option value="f-c">Fahrenheit ‚ûù Celsius</option>
        <option value="min-sec">Minutes ‚ûù Seconds</option>
        <option value="sec-min">Seconds ‚ûù Minutes</option>
      </select>
      <button onclick="convertUnit()">Convert</button>
      <div id="convResult"></div>
    </div>
  </div>

  <!-- Settings Tab -->
  <div id="settings" class="tab">
    <h2>‚öô Settings</h2>
    <button onclick="toggleGalaxy()">Toggle Galaxy Theme</button>
    <button onclick="exportHistory()">Export History</button>
  </div>

  <script>
    const display = document.getElementById('display');
    const historyDiv = document.getElementById('history');
    let history = [];

    document.querySelectorAll('.buttons button').forEach(btn => {
      btn.addEventListener('click', () => handleInput(btn.textContent));
    });

    function handleInput(val) {
      if(val === 'C') display.textContent = '';
      else if(val === '=') calculate();
      else if(val === 'œÄ') display.textContent += 'pi';
      else if(val === 'e') display.textContent += 'e';
      else if(val === '‚àö') display.textContent += 'sqrt('; 
      else if(val === '!') display.textContent += 'factorial('; 
      else display.textContent += val;
    }

    function calculate() {
      try {
        let result = math.evaluate(display.textContent);
        history.push(display.textContent + ' = ' + result);
        updateHistory();
        display.textContent = result;
      } catch {
        display.textContent = 'Error';
      }
    }

    function updateHistory() {
      historyDiv.innerHTML = history.map(h => `<div>${h}</div>`).join('');
    }

    // Tabs
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.tab).classList.add('active');
      });
    });

    // Graphing with Chart.js
    let chart;
    function plotGraph() {
      let expr = document.getElementById('graphInput').value;
      let xValues = math.range(-10, 10, 0.1).toArray();
      let yValues = xValues.map(x => {
        try { return math.evaluate(expr, {x}); }
        catch { return null; }
      });
      if(chart) chart.destroy();
      chart = new Chart(document.getElementById('graphCanvas'), {
        type: 'line',
        data: { labels: xValues, datasets: [{ label: expr, data: yValues, borderColor: '#0ff' }] },
        options: { responsive: true, scales: { x: { display: false } } }
      });
    }

    // Converter
    function convertUnit() {
      let val = parseFloat(document.getElementById('convInput').value);
      let type = document.getElementById('convType').value;
      let result;
      switch(type) {
        case 'm-cm': result = val * 100; break;
        case 'cm-m': result = val / 100; break;
        case 'kg-g': result = val * 1000; break;
        case 'g-kg': result = val / 1000; break;
        case 'c-f': result = (val * 9/5) + 32; break;
        case 'f-c': result = (val-32) * 5/9; break;
        case 'min-sec': result = val * 60; break;
        case 'sec-min': result = val / 60; break;
        default: result = 'Invalid';
      }
      document.getElementById('convResult').textContent = 'Result: ' + result;
    }

    // Settings
    function toggleGalaxy(){ document.body.classList.toggle('galaxy'); }
    function exportHistory(){
      let blob = new Blob([history.join('\n')], { type: 'text/plain' });
      let a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'history.txt';
      a.click();
    }
  </script>
</body>
</html>
